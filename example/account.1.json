{
  "model" : {
    "name"      : "Account",
    "crud"      : {
      "enable"  : true,
      "exclude" : []
    },
    "fn" : [],
    "crypto" : {
      "hashType" : "aes256",
      "hashKey"  : "gjEWDaFYOhuQoysADloy2S7dgAM7NIG7"
    },
    "properties"     : {
      "status"                     : {
        "required"                   : true,
        "type"                       : "String"
      },
      "optin_updated_date"                     : {
        "required"                   : false,
        "type"                       : "Date"
      },
      "personal_data_deleted_date" : {
        "required"                   : false,
        "type"                       : "Date"
      },
      "updator_id"                     : {
        "required"                   : false,
        "type"                       : "ObjectId"
      },
      "firstname"    : {
        "required"     : false,
        "type"         : "String",
        "index"        : true,
        "ym_crypt"     : true
      },
      "objtest" : {
        "required" : true,
        "type" : {
          "objfoo" : { 
            "required" : true,
            "type" : [
              {
                "objbar" : {
                  "type" : "String",
                  "required" : true,
                  "ym_crypt" : true
                }
              }
            ]
          }
        }
      },
      "lastname"                     : {
        "required"                   : false,
        "type"                       : "String",
        "index"                      : true,
        "ym_crypt"                   : true
      },
      "maiden_name"                     : {
        "required"                   : false,
        "type"                       : "String",
        "ym_crypt"                   : true
      },
      "icu_reference"                : {
        "required"                   : false,
        "type"                       : "String"
      },
      "birth_date"                   : {
        "required"                   : false,
        "type"                       : "Date"
      },
      "birth_place"                   : {
        "required"                   : false,
        "type"                       : "String"
      },
      "bascule_activated_date"        : {
        "required"                   : false,
        "type"                       : "Date"
      },
      "family_status"                : {
        "required"                   : false,
        "type"                       : "String"
      },
      "civility"                     : {
        "required"                   : false,
        "type"                       : "String",
        "ym_crypt"                   : true
      },
      "job_category"                 : {
        "required"                   : false,
        "type"                       : "String"
      },
      "dependent_person"             : {
        "required"                   : false,
        "type"                       : "String"
      },
      "general_terms"                    : {
        "required"                   : false,
        "type"                       : {
          "membership"              : {
            "required"             : false,
            "type"                 : "String"
          }
        }
      },
      "childrens"                    : {
        "required"                   : false,
        "type"                       : [
          {
            "firstname"              : {
              "required"             : false,
              "type"                 : "String",
              "ym_crypt"             : true
            },
            "lastname"               : {
              "required"             : false,
              "type"                 : "String",
              "ym_crypt"             : true
            },
            "birth_date"             : {
              "required"             : false,
              "type"                 : "Date",
              "ym_crypt"             : true
            },
            "sex"                    : {
              "required"             : false,
              "type"                 : "String"
            },
            "testarray"              : {
              "required"             : true,
              "type"                 : [
                {
                  "foo"              : {
                    "required" : true,
                    "type"     : "String",
                    "ym_crypt" : true
                  },
                  "bar" : [
                    {
                      "foo" : {
                        "required" : true,
                        "type" : "String",
                        "ym_crypt" : true
                      }
                    }  
                  ]
                }
              ]
            }
          }
        ]
      },
      "commercial_optin"             : {
        "required"                   : false,
        "type"                       : [
          {
            "call"                   : {
              "required"             : false,
              "type"                 : "Boolean"
            },
            "sms"                    : {
              "required"             : false,
              "type"                 : "Boolean"
            },
            "newsletter"                    : {
              "required"             : false,
              "type"                 : "Boolean"
            },
            "email"                  : {
              "required"             : true,
              "type"                 : "Boolean"
            },
            "franchise"                  : {
              "required"             : false,
              "type"                 : "Boolean"
            },
            "optin_type"             : {
              "required"             : false,
              "type"                 : "String"
            },
            "store_choices"                  : {
              "required"             : false,
              "type"                 : [ "String" ]
            }
          }
        ]
      },
      "home_id"                      : {
        "required"                   : false,
        "type"                       : "ObjectId"
      },
      "emails"                       : {
        "required"                   : false,
        "type"                       : [
          {
            "deleted_date"           : {
              "required"             : false,
              "type"                 : "Date"
            },
            "address"                : {
              "type"                 : "String",
              "required"             : true,
              "index"                : true,
              "ym_crypt"             : true
            },
            "validated_date"         : "Date",
            "token"                  : {
              "required"             : false,
              "type"                 : "String"
            },
            "token_lost"             : "Boolean",
            "primary"                : {
              "required"             : true,
              "type"                 : "Boolean",
              "index"                : true
            }
          }
        ]
      },
      "phones"                       : {
        "required"                   : false,
        "type"                       : [
          {
            "deleted_date"           : {
              "required"             : false,
              "type"                 : "Date"
            },
            "prefix"                 : {
              "required"             : true,
              "type"                 : "String"
            },
            "number"                 : {
              "required"             : true,
              "type"                 : "String",
              "index"                : true,
              "ym_crypt"             : true
            },
            "validation_type"        : {
              "required"             : true,
              "type"                 : "String"
            },
            "validated_date"         : "Date",
            "primary"                : {
              "required"             : true,
              "type"                 : "Boolean",
              "index"                : true
            },
            "phone_type"             : {
              "required"             : true,
              "type"                 : "String",
              "index"                : true
            },
            "sub_type"               : {
              "required"             : false,
              "type"                 :"String"
            },
            "token_lost"             : "String",
            "codes"                  : {
              "required"             : false,
              "type"                 : [
                {
                  "code"             : {
                    "required"       : false,
                    "type"           : "String"
                  },
                  "validated_at"   : "Date",
                  "retry"            : {
                    "required"       : false,
                    "type"           : "Number"
                  }
                }
              ]
            }
          }
        ]
      },
      "sync"                         : {
        "required"                   : true,
        "type"                       : {
          "to_vindemia"              : {
            "required"               : true,
            "type"                   : "Boolean",
            "index"     : true
          },
          "from_vindemia"            : {
            "required"               : true,
            "type"                   :"Boolean",
            "index"     : true
          }
        }
      },
      "auths"                        : {
        "required"                   : true,
        "type"                       : [ "ObjectId" ]
      },
      "notification_preferences"     : {
        "required"                   : false,
        "type"                       : [ "String" ]
      },
      "reactivated"                  : {
        "required"                   : false,
        "type"                       : [
          {
            "deleted_date"              : {
              "required"             : true,
              "type"                 : "Date"
            },
            "activated_date"        : {
              "required"             : true,
              "type"                 : "Date"
            },
            "updator_id"             : {
              "required"             : true,
              "type"                 : "ObjectId"
            },
            "reason"                    : {
              "required"             : true,
              "type"                 : "String"
            }
          }
        ]
      },
      "profiles"                     : {
        "required"                   : true,
        "type"                       : [ "ObjectId" ]
      },
      "iso_code"                     : {
        "required"                   : true,
        "type"                       : "String"
      },
      "created_date"                 : {
        "type"                       : "Date",
        "required"                   : true
      },
      "updated_date"                 : {
        "type"                       : "Date",
        "required"                   : true
      },
      "deleted_date"                 : {
        "type"                       : "Date",
        "required"                   : false
      },
      "deleted_reason"                 : {
        "type"                       : "String",
        "required"                   : false
      },
      "deleted_id"                 : {
        "type"                       : "String",
        "required"                   : false
      },
      "token"                         : {
        "required"                   : false,
        "type"                       : {
          "newsletter"               : {
            "required" : false,
            "type"     : "String",
            "index"    : true
          }
        }
      },
      "fusion"            : {
        "required"        : false,
        "type"            : [
          {
            "fusion_date" : {
              "required"  : true,
              "type"      : "Date"
            },
            "reason"      : {
              "required"  : true,
              "type"      : "String"
            },
            "is_master"   : {
              "required"  : true,
              "type"      : "Boolean"
            },
            "accounts_id" : {
              "required"  : true,
              "type"      : [ "ObjectId" ]
            },
            "animator_id" : {
              "required"  : true,
              "type"      : "ObjectId"
            }
          }
        ]
      },
      "unsubscribe_actions" : {
        "required"          : false,
        "type"              : [
          {
            "unsubscribe_date" : {
              "required"       : false,
              "type"           : "Date"
            },
            "unsubscribe_type" : {
              "required"       : false,
              "type"           : "String"
            },
            "detail"           : {
              "required"       : false,
              "type"           : "String"
            },
            "reason"           : {
              "required"       : false,
              "type"           : "String"
            },
            "reason_detail"    : {
              "required"       : false,
              "type"           : "String"
            }
          }
        ]
      }
    }
  }
}
